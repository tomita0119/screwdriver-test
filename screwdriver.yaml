shared:
  image: node:12
  steps:
    - init: npm install -y nginx

jobs:
  main:
    requires: [~pr, ~commit]
    steps:
      - greet: echo hello
  build:
    requires: [~pr, ~commit]
    steps:
      - init: npm install -y nginx
  publish:
    requires: main
    steps:
      - publish: echo publish
